START:
	DIS I
	DIS TCNTI
	STRT T
	CALL INIT_UART
LOOP:
	MOV A,#0x48
	CALL UART_WRITE
	MOV A,#0x45
	CALL UART_WRITE
	MOV A,#0x4C
	CALL UART_WRITE
	MOV A,#0x4C
	CALL UART_WRITE
	MOV A,#0x4F
	CALL UART_WRITE
	MOV A,#0x52
	CALL UART_WRITE
	MOV A,#0x4C
	CALL UART_WRITE
	MOV A,#0x44
	CALL UART_WRITE
	MOV A,#0x21
	CALL UART_WRITE
	MOV A,#0x0D
	CALL UART_WRITE
	MOV A,#0x0A
	CALL UART_WRITE
	CALL DELAY
	JMP LOOP

UART_WRITE:
	ANL P2,#249
	NOP
	OUTL BUS,A
	NOP
	ORL P2,#4
UART_WRITE_DELAY_LOOP:
	NOP
	NOP
	NOP
	NOP
	INS A,BUS
	ANL A,#4
	JZ UART_WRITE_DELAY_LOOP

	ORL P2,#2
	RET

	;P20 = RESET
	;P21 = CS
	;P22 = C/D
	;P23 = WR
INIT_UART:
	MOV A,#0b00001111
	OUTL P2,A
	CALL DELAY
	ANL P2,#254
	CALL DELAY
	ANL P2,#253
	MOV A,#0b01001110
	OUTL BUS,A
	MOV A,#0b00010111
	OUTL BUS,A
	ORL P2,#2
	RET
	
DELAY:
	MOV A,#0xFF
DELAY_LOOP:
	ADD A,#0xFF
	NOP
	NOP
	NOP
	NOP
	NOP
	JNZ DELAY_LOOP
	RETR
